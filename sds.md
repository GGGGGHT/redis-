```c
struct sdshdr {
    // 记录 buf 数组中已使用字节的数量
    // 等于 SDS 所保存字符串的长度
    int len;

    // 记录 buf 数组中未使用字节的数量
    int free;

    // 字节数组，用于保存字符串
    char buf[];
};
```

![image](https://user-images.githubusercontent.com/26846402/121488141-60a4ea80-ca05-11eb-968a-1fb653b47481.png)

* free属性值为0，表示这个SDS没有分配任务未使用空间
* len属性值为5，表示这个SDS保存了5个字节长的字符串
* buf属性是个char类型的数组，前5个字节保存了`Redis`这5个字符,最后一个字节保存了空字符,空字符的字节空间不计算在SDS的len中,空字符添加到字符串末尾是由sds函数自动完成的。对使用者无感

> 遵循空字符结尾这一惯例的好处是， SDS 可以直接重用一部分 C 字符串函数库里面的函数。

eg: 
```c
printf("%s", s->buf);
```
打印出: Redis




---
Q:Redis为什么使用sds来代替c的字符串？
A:c语言的字符串不能满足Redis对字符串在安全性，效率以及功能方面的要求。
  - c语言字符串不记录自身的长度信息，为了获取字符串长度，需要遍历整个字符串，时间复杂度为O(n)
  - 容易造成缓冲区溢出
